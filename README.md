工作中碰到一些分页的场景，正好这个也是很常见的业务场景，研究一下

# 业务分析

通常分页是指，在存在大量数据需要显示的情况下，通常不会一次性全部拉出，只拉取其中一部分（显示/缓存多少拉多少）。

好处包含：

- 提升拉取数据的利用率
- 减轻服务器的单次请求负载，支撑更大的请求量

## 目前市面上比较常见的分页设计

总结下来大概是几种：

- 滚动分页：每次都从第一个文档开始按顺序拉取
- 页码分页/随机分页：允许拉取任何区间的文档

### 淘宝/天猫/拼多多等电商平台
   1. 滚动分页，上滑刷一批新商品，下滑刷新页面
   2. 页码分页，点击某一页显示对应页码下的数据
3. 
### 抖音/快手等短视频平台
   1. 类似滚动分页，上滑拉取一个新视频，下滑返回上一条视频或者刷一个新视频

## 业务流程拆解

1. 条件筛选内容
2. 对内容分段拉取

## 可能存在的问题

### 深分页问题

- 比如 elasticsearch 的 from + size 方案，每次要到各个 shard 上面拉取前 from + size 个文档，然后汇总统计再把从 from 开始 size 个内容返回
- from 很大的情况下，这个操作非常耗时且效率很低（为此 elasticsearch 默认限制了 from + size 不能超过 10000）
- 常见于页码分页/随机分页

### 数据动态更新的问题

- 分页拉取是一个异步的过程，这个期间可能存在新增数据 or 删除数据
- 例如原本有 abc 三个文档，第一次分页拉取了 ab，第二次拉取前新增一个 d 插入到 ab 之间，第二次拉取的时候变成 bc，b 又拉了一次，同理删除也有类似的影响
- 常见于滚动分页

# 这个仓库研究什么？

- 各种主流存储自带的分页解决方案
- 具体分页实践方案
